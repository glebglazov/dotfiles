{{- $workstation := false -}}
{{- $bastion := false -}}
{{- $sshKeys := list -}}
{{- $includePersonalSshKeys := false -}}
{{- $gpgKeyObjectId := "" -}}

{{- $hostname := .chezmoi.hostname -}}

{{- if eq $hostname "bastion" -}}
{{-   $bastion = true -}}
{{-   $includePersonalSshKeys = true -}}
{{- else -}}
{{-   $workstation = true -}}
{{-   $includePersonalSshKeys = true -}}
{{- end -}}

{{- if eq $hostname "Glebs-MacBook-Pro" -}}
{{-   $gpgKeyObjectId = "bfc307b3-415b-47da-9928-aed50091ed1e" }}
{{- else if eq $hostname "bastion" -}}
{{-   $gpgKeyObjectId = "bfc307b3-415b-47da-9928-aed50091ed1e" }}
{{- else if eq $hostname "workstation" -}}
{{-   $gpgKeyObjectId = "bfc307b3-415b-47da-9928-aed50091ed1e" }}
{{- end -}}

{{- if $bastion }}
{{-   $sshKeys = concat $sshKeys (list "bastion") }}
{{- end }}
{{- if $includePersonalSshKeys }}
{{-   $sshKeys = concat $sshKeys (list "gglazov_main" "gglazov_deprecated") }}
{{- end }}

{{- if eq .chezmoi.hostname "bastion" -}}
{{-   $bastion = true -}}
{{- else -}}
{{-   $workstation = true -}}
{{- end -}}

[data]
bastion = {{ $bastion }}
workstation = {{ $workstation }}
ssh_keys = [ {{ $sshKeys | quoteList | join ", " }} ]
include_personal_ssh_keys = {{ $includePersonalSshKeys }}
gpg_key_object_id = {{ $gpgKeyObjectId | quote }}
