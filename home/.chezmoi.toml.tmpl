{{- $workstation := false -}}
{{- $bastion := false -}}
{{- $sshKeys := list -}}
{{- $includePersonalSshKeys := false -}}
{{- $gpgKeyObjectId := "" -}}

{{- $hostname := .chezmoi.hostname -}}

{{- if eq $hostname "bastion" -}}
{{-   $bastion = true -}}
{{-   $includePersonalSshKeys = true -}}
{{- else -}}
{{-   $workstation = true -}}
{{-   $includePersonalSshKeys = true -}}
{{- end -}}

{{- $gpgKeyObjectId = "[GPG Key] MacBook Pro" }}

{{- if $bastion }}
{{-   $sshKeys = concat $sshKeys (list "bastion") }}
{{- end }}
{{- if $includePersonalSshKeys }}
{{-   $sshKeys = concat $sshKeys (list "gglazov_main" "gglazov_deprecated") }}
{{- end }}

{{- if eq .chezmoi.hostname "bastion" -}}
{{-   $bastion = true -}}
{{-   $workstation = true -}}
{{- else -}}
{{-   $workstation = true -}}
{{- end -}}

[data]
bastion = {{ $bastion }}
workstation = {{ $workstation }}
ssh_keys = [ {{ $sshKeys | quoteList | join ", " }} ]
include_personal_ssh_keys = {{ $includePersonalSshKeys }}
gpg_key_object_id = {{ $gpgKeyObjectId | quote }}
